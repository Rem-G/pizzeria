{"ast":null,"code":"var _jsxFileName = \"/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Profile.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\nfunction Profile({\n  user_token\n}) {\n  const [client_pizzas, setClientPizzas] = useState([]);\n  const [username, setUsername] = useState(\"\");\n  useEffect(() => {\n    if (user_token !== \"\") {\n      const user = jwt_decode(user_token);\n      console.log(user.username);\n      setUsername(user.username);\n      handleGetOrders(user.username);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  const handleGetOrders = username => {\n    console.log(username);\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/readClient',\n      data: {\n        email: username\n      }\n    }).then(response => {\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/api/v1/readClientOrders',\n        data: {\n          client: response.data._id\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          setClientPizzas(res.data.pizzas);\n        }\n      });\n    });\n  };\n\n  console.log(client_pizzas);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, \"Bienvenue \", username), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Profile.js"],"names":["React","useEffect","useState","axios","jwt_decode","Card","CardContent","Profile","user_token","client_pizzas","setClientPizzas","username","setUsername","user","console","log","handleGetOrders","method","url","data","email","then","response","client","_id","res","status","pizzas"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA4BC,QAA5B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;;AAEA,SAASC,OAAT,CAAiB;AAACC,EAAAA;AAAD,CAAjB,EAA8B;AAC1B,QAAM,CAACC,aAAD,EAAgBC,eAAhB,IAAmCR,QAAQ,CAAC,EAAD,CAAjD;AACA,QAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIO,UAAU,KAAK,EAAnB,EAAuB;AACnB,YAAMK,IAAI,GAAGT,UAAU,CAACI,UAAD,CAAvB;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACF,QAAjB;AACAC,MAAAA,WAAW,CAACC,IAAI,CAACF,QAAN,CAAX;AACAK,MAAAA,eAAe,CAACH,IAAI,CAACF,QAAN,CAAf;AACH,KANW,CAOZ;;AACD,GARM,EAQJ,EARI,CAAT;;AAUA,QAAMK,eAAe,GAAIL,QAAD,IAAc;AAClCG,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACAR,IAAAA,KAAK,CAAC;AACFc,MAAAA,MAAM,EAAE,MADN;AAEFC,MAAAA,GAAG,EAAE,yCAFH;AAGFC,MAAAA,IAAI,EAAG;AACHC,QAAAA,KAAK,EAAET;AADJ;AAHL,KAAD,CAAL,CAMGU,IANH,CAMQC,QAAQ,IAAI;AAChBnB,MAAAA,KAAK,CAAC;AACFc,QAAAA,MAAM,EAAE,MADN;AAEFC,QAAAA,GAAG,EAAE,+CAFH;AAGFC,QAAAA,IAAI,EAAG;AACHI,UAAAA,MAAM,EAAED,QAAQ,CAACH,IAAT,CAAcK;AADnB;AAHL,OAAD,CAAL,CAMGH,IANH,CAMQI,GAAG,IAAI;AACX,YAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAuB;AACnBhB,UAAAA,eAAe,CAACe,GAAG,CAACN,IAAJ,CAASQ,MAAV,CAAf;AACH;AACJ,OAVD;AAWH,KAlBD;AAmBH,GArBD;;AAuBAb,EAAAA,OAAO,CAACC,GAAR,CAAYN,aAAZ;AAEA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAeE,QAAf,CADJ,eAGI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAHJ,CADJ;AASH;;AAED,eAAeJ,OAAf","sourcesContent":["import React, { useEffect , useState} from 'react';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\nfunction Profile({user_token}){\n    const [client_pizzas, setClientPizzas] = useState([]);\n    const [username, setUsername] = useState(\"\")\n\n    useEffect(() => {\n        if (user_token !== \"\") {\n            const user = jwt_decode(user_token);\n            console.log(user.username);\n            setUsername(user.username);\n            handleGetOrders(user.username);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n\n    const handleGetOrders = (username) => {\n        console.log(username);\n        axios({\n            method: 'post',\n            url: 'http://localhost:3000/api/v1/readClient',\n            data : {\n                email: username,\n            }\n        }).then(response => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/readClientOrders',\n                data : {\n                    client: response.data._id\n                }\n            }).then(res => {\n                if (res.status === 200){\n                    setClientPizzas(res.data.pizzas);\n                }\n            });\n        });\n    }\n\n    console.log(client_pizzas);\n\n    return (\n        <div>\n            <h1>Bienvenue {username}</h1>\n\n            <Card>\n                <CardContent></CardContent>\n            </Card>\n        </div>\n    )\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}