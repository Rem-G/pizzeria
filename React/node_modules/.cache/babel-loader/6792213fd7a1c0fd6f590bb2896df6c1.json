{"ast":null,"code":"var _jsxFileName = \"/Users/remi/Desktop/Polytech/4A/INFO734/TP/pizzeria-react/src/components/cards.js\";\nimport React from 'react';\nimport CardPizza from \"./cardPizza\";\nexport default function Cards({\n  pizzas,\n  addPizzas\n}) {\n  const getIngredient = id => {\n    const HTTP = new XMLHttpRequest();\n    const url = \"http://localhost:3000/api/v1/readIngredient/\" + id;\n    HTTP.open(\"GET\", url);\n    HTTP.send();\n\n    HTTP.onreadystatechange = e => {\n      const res = JSON.parse(HTTP.responseText);\n      console.log(res);\n      return res;\n    };\n  };\n\n  const getIngredients = pizzas => {\n    console.log(pizzas);\n    pizzas.forEach(pizza => {\n      pizza[0].ingredients.map((ing_id, ing_index) => {\n        pizza[0].ingredients[ing_index] = getIngredient(ing_id);\n      });\n    });\n    return pizzas;\n  };\n\n  const getPizzas = () => {\n    const HTTP = new XMLHttpRequest();\n    const url = \"http://localhost:3000/api/v1/readPizzas/\";\n    HTTP.open(\"GET\", url);\n    HTTP.send();\n\n    HTTP.onreadystatechange = e => {\n      const res = JSON.parse(HTTP.responseText);\n      console.log(res);\n      res.map(item => {\n        return [...pizzas, {\n          nom: item.nom,\n          pate: item.pate,\n          base: item.base,\n          prix: item.prix,\n          calzone: item.calzone,\n          ingredients: item.ingredients,\n          id: item._id\n        }];\n      });\n    };\n  };\n\n  if (pizzas.length === 0) pizzas = getPizzas();\n  addPizzas(getIngredients(pizzas));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, \"Pizzas\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, pizzas.map((value, index) => {\n    return /*#__PURE__*/React.createElement(CardPizza, {\n      key: index,\n      pizza: value[0],\n      pizzas: pizzas,\n      addPizzas: addPizzas,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 20\n      }\n    });\n  })));\n}","map":{"version":3,"sources":["/Users/remi/Desktop/Polytech/4A/INFO734/TP/pizzeria-react/src/components/cards.js"],"names":["React","CardPizza","Cards","pizzas","addPizzas","getIngredient","id","HTTP","XMLHttpRequest","url","open","send","onreadystatechange","e","res","JSON","parse","responseText","console","log","getIngredients","forEach","pizza","ingredients","map","ing_id","ing_index","getPizzas","item","nom","pate","base","prix","calzone","_id","length","value","index"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport CardPizza from \"./cardPizza\";\n\n\nexport default function Cards({pizzas, addPizzas}) {\n\n  const getIngredient = (id) => {\n    const HTTP = new XMLHttpRequest();\n    const url = \"http://localhost:3000/api/v1/readIngredient/\"+id\n    HTTP.open(\"GET\", url);\n    HTTP.send();\n\n    HTTP.onreadystatechange=(e)=>{\n      const res = JSON.parse(HTTP.responseText);\n      console.log(res);\n      return res;\n    }\n  }\n\n  const getIngredients = (pizzas) => {\n    console.log(pizzas);\n    pizzas.forEach(pizza => {\n      pizza[0].ingredients.map((ing_id, ing_index) => {\n        pizza[0].ingredients[ing_index] = getIngredient(ing_id);\n      })\n    })\n    return pizzas;\n  }\n\n  const getPizzas = () => {\n    const HTTP = new XMLHttpRequest();\n\n    const url = \"http://localhost:3000/api/v1/readPizzas/\";\n    HTTP.open(\"GET\", url);\n    HTTP.send();\n\n    HTTP.onreadystatechange=(e)=>{\n      const res = JSON.parse(HTTP.responseText);\n      console.log(res);\n      res.map((item) => {\n        return [...pizzas, {nom:item.nom, pate:item.pate, base:item.base, prix:item.prix, calzone:item.calzone, ingredients:item.ingredients, id:item._id}];\n      })\n    }\n  }\n\n  if (pizzas.length === 0)\n    pizzas = getPizzas();\n    addPizzas(getIngredients(pizzas));\n\n  return (\n      <div>\n          <h2>Pizzas</h2>\n          <ul>\n          {pizzas.map((value, index) => {\n            return <CardPizza key={index} pizza={value[0]} pizzas={pizzas} addPizzas={addPizzas}/>\n           })}\n        </ul>\n          \n      </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}