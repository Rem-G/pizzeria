{"ast":null,"code":"var _jsxFileName = \"/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Login.js\";\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\nfunction Login({\n  user_token,\n  setUserToken\n}) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [show_modal_fail, setShowModalFail] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n\n  const handleSubmitSignup = () => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/signup',\n      data: {\n        username: username,\n        password: password\n      }\n    }).then(response => {\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/api/v1/signin',\n        data: {\n          username: username,\n          password: password\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          const token = res.token;\n          console.log(token);\n          console.log(jwt_decode(token));\n          setUserToken(res.token);\n          setRedirect(true);\n        } else {\n          setShowModalFail(true);\n        }\n      });\n    });\n  };\n\n  const handleSubmitSignin = () => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/signin',\n      data: {\n        username: username,\n        password: password\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        const token = res.token;\n        console.log(token);\n        console.log(jwt_decode(token));\n        setUserToken(res.token);\n        setRedirect(true);\n      } else {\n        setShowModalFail(true);\n      }\n    });\n  };\n\n  const handleCloseModalFail = () => {\n    setShowModalFail(false);\n    setRedirect(true);\n  };\n\n  const handleShowModalFail = () => setShowModalFail(true);\n\n  const handleCloseModal = () => setRedirect(true);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: true,\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"Connexion/Inscription\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasiName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 33\n    }\n  }, \"Nom d'utilisateur\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Nom d'utilisateur\",\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasicSurname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 33\n    }\n  }, \"Mot de passe\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Mot de passe\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"success\",\n    onClick: handleSubmitSignin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, \"Se connecter\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"success\",\n    onClick: handleSubmitSignup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"S'inscrire\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, \"Fermer\"))), show_modal_fail && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: handleShowModalFail,\n    onHide: handleCloseModalFail,\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, \"L'authentification/inscription a \\xE9chou\\xE9, veuillez r\\xE9essayer.\"), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseModalFail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, \"Fermer\")))), redirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Login.js"],"names":["React","useState","Redirect","Modal","Button","Form","axios","jwt_decode","Login","user_token","setUserToken","username","setUsername","password","setPassword","show_modal_fail","setShowModalFail","redirect","setRedirect","handleSubmitSignup","method","url","data","then","response","res","status","token","console","log","handleSubmitSignin","handleCloseModalFail","handleShowModalFail","handleCloseModal","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\n\nfunction Login({user_token, setUserToken}){\n\n        const [username, setUsername] = useState(\"\");\n        const [password, setPassword] = useState(\"\");\n        const [show_modal_fail, setShowModalFail] = useState(false);\n        const [redirect, setRedirect] = useState(false);\n\n\n        const handleSubmitSignup = () => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/signup',\n                data : {\n                    username: username,\n                    password: password,\n                }\n            }).then(response => {\n                axios({\n                    method: 'post',\n                    url: 'http://localhost:3000/api/v1/signin',\n                    data : {\n                        username: username,\n                        password: password,\n                    }\n                }).then(res => {\n                    if (res.status === 200){\n                        const token = res.token;\n                        console.log(token);\n                        console.log(jwt_decode(token));\n                        \n                        setUserToken(res.token);\n                        setRedirect(true);\n                    }\n                    else{\n                        setShowModalFail(true);\n                    }\n                });\n            });\n        };\n\n        const handleSubmitSignin = () => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/signin',\n                data : {\n                    username: username,\n                    password: password,\n                }\n            }).then(res => {\n                if (res.status === 200){\n                    const token = res.token;\n                    console.log(token);\n                    console.log(jwt_decode(token));\n                    setUserToken(res.token);\n                    setRedirect(true);\n                }\n                else{\n                    setShowModalFail(true);\n                }\n            });\n        }\n\n        const handleCloseModalFail = () => {setShowModalFail(false); setRedirect(true);};\n        const handleShowModalFail = () => setShowModalFail(true);\n        const handleCloseModal = () => setRedirect(true);\n\n        return (\n            <div>\n                <Modal\n                show={true}\n                backdrop=\"static\"\n                >\n                    <Modal.Header>\n                    <Modal.Title>Connexion/Inscription</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form>\n                            <Form.Group controlId=\"formBasiName\">\n                                <Form.Label>Nom d'utilisateur</Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Nom d'utilisateur\" onChange={e => setUsername(e.target.value)}/>\n                            </Form.Group>\n\n                            <Form.Group controlId=\"formBasicSurname\">\n                                <Form.Label>Mot de passe</Form.Label>\n                                <Form.Control type=\"password\" placeholder=\"Mot de passe\" onChange={e => setPassword(e.target.value)}/>\n                            </Form.Group>\n                        </Form>\n                    </Modal.Body>\n                    <Modal.Footer>\n                    <Button size=\"small\" variant=\"success\" onClick={handleSubmitSignin}>Se connecter</Button>\n                    <Button size=\"small\" variant=\"success\" onClick={handleSubmitSignup}>S'inscrire</Button>\n                    <Button variant=\"secondary\" onClick={handleCloseModal}>Fermer</Button>\n                    </Modal.Footer>\n                </Modal>\n\n                {show_modal_fail && \n                <div>\n                    <Modal\n                    show={handleShowModalFail}\n                    onHide={handleCloseModalFail}\n                    backdrop=\"static\"\n                    >\n                        <Modal.Header closeButton>\n                        </Modal.Header>\n                        <Modal.Body>\n                            L'authentification/inscription a échoué, veuillez réessayer.\n                        </Modal.Body>\n                        <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={handleCloseModalFail}>Fermer</Button>\n                        </Modal.Footer>\n                    </Modal>\n                </div>\n            }\n\n                {redirect &&\n                    <Redirect to=\"/\" />\n                }\n            </div>\n        )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}