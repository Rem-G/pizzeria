{"ast":null,"code":"var _jsxFileName = \"/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Profile.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Container from '@material-ui/core/Container';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\nfunction Profile({\n  user_token\n}) {\n  const [client_orders, setClientOrders] = useState([]);\n  const [email, setEmail] = useState(\"\");\n  const [modal, setShowModal] = useState(false);\n  const [deletionCompleted, setDeletion] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n\n  const handleCloseModal = () => setShowModal(false);\n\n  const handleShowModal = () => setShowModal(true);\n\n  const handleCloseDeletionModal = () => {\n    setDeletion(false);\n    setRedirect(true);\n  };\n\n  const handleShowDeletionModal = () => setDeletion(true);\n\n  const handleGetOrders = email => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/readClient',\n      data: {\n        email: email\n      }\n    }).then(response => {\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/api/v1/readClientOrders',\n        data: {\n          client: response.data[0]._id\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          setClientOrders(res.data);\n        }\n      });\n    });\n  };\n\n  const handleDeleteAccount = () => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/deleteUser',\n      data: {\n        username: email\n      }\n    }).then(response => {\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/api/v1/deleteUser',\n        data: {\n          email: email\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          setShowModal(false);\n          setDeletion(true);\n        }\n      });\n    });\n  };\n\n  useEffect(() => {\n    console.log(user_token);\n\n    if (user_token && user_token !== \"\") {\n      const user = jwt_decode(user_token);\n      setEmail(user.username);\n      handleGetOrders(user.username);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, user_token !== \"\" && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      background: \"transparent\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Bienvenue \", email), /*#__PURE__*/React.createElement(Container, {\n    direction: \"row\",\n    alignItems: \"center\",\n    alignContent: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    title: \"Historique de vos commandes\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }, client_orders.map(order => /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 49\n    }\n  }, \"Date : \", order.createdAt), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 49\n    }\n  }, \"Pizzas :\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 49\n    }\n  }, order.pizzas.map(pizza => /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 57\n    }\n  }, pizza.nom))))))))), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      marginLeft: \"42%\"\n    },\n    variant: \"danger\",\n    onClick: handleShowModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 29\n    }\n  }, \"Supprimer mon compte\")))), user_token === \"\" && /*#__PURE__*/React.createElement(\"h1\", {\n    style: {\n      background: \"transparent\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  }, \"Veuillez vous connecter pour acc\\xE9der \\xE0 votre compte\"), modal && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: handleShowModal,\n    onHide: handleCloseModal,\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, \"Souhaitez-vous supprimer d\\xE9finitivement votre compte ?\")), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"danger\",\n    onClick: handleDeleteAccount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 29\n    }\n  }, \"Valider\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 29\n    }\n  }, \"Annuler\")))), deletionCompleted && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: handleShowDeletionModal,\n    onHide: handleCloseDeletionModal,\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 25\n    }\n  }, \"Votre compte a \\xE9t\\xE9 supprim\\xE9\"), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseDeletionModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, \"Fermer\")))), redirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }));\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Profile.js"],"names":["React","useEffect","useState","Redirect","axios","jwt_decode","Card","CardHeader","CardContent","CardActions","Container","Button","Modal","Profile","user_token","client_orders","setClientOrders","email","setEmail","modal","setShowModal","deletionCompleted","setDeletion","redirect","setRedirect","handleCloseModal","handleShowModal","handleCloseDeletionModal","handleShowDeletionModal","handleGetOrders","method","url","data","then","response","client","_id","res","status","handleDeleteAccount","username","console","log","user","background","map","order","createdAt","pizzas","pizza","nom","marginLeft"],"mappings":"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","sourcesContent":["import React, { useEffect , useState} from 'react';\nimport {Redirect} from 'react-router-dom';\n\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Container from '@material-ui/core/Container';\n\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\n\nfunction Profile({user_token}){\n    const [client_orders, setClientOrders] = useState([]);\n    const [email, setEmail] = useState(\"\");\n    const [modal, setShowModal] = useState(false);\n    const [deletionCompleted, setDeletion] = useState(false);\n    const [redirect, setRedirect] = useState(false);\n\n    const handleCloseModal = () => setShowModal(false);\n    const handleShowModal = () => setShowModal(true);\n\n    const handleCloseDeletionModal = () => {setDeletion(false); setRedirect(true);};\n    const handleShowDeletionModal = () => setDeletion(true);\n\n    const handleGetOrders = (email) => {\n        axios({\n            method: 'post',\n            url: 'http://localhost:3000/api/v1/readClient',\n            data : {\n                email: email,\n            }\n        }).then(response => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/readClientOrders',\n                data : {\n                    client: response.data[0]._id\n                }\n            }).then(res => {\n                if (res.status === 200){\n                    setClientOrders(res.data);\n                }\n            });\n        });\n    }\n\n    const handleDeleteAccount = () => {\n        axios({\n            method: 'post',\n            url: 'http://localhost:3000/api/v1/deleteUser',\n            data : {\n                username: email\n            }\n        }).then(response => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/deleteUser',\n                data : {\n                    email: email\n                }\n            }).then(res => {\n                if (res.status === 200){\n                    setShowModal(false);\n                    setDeletion(true);\n                }\n            });\n        });\n    }\n\n    useEffect(() => {\n        console.log(user_token);\n        if (user_token && user_token !== \"\") {\n            const user = jwt_decode(user_token);\n            setEmail(user.username);\n            handleGetOrders(user.username);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n\n\n    return (\n        <div>\n            {user_token !== \"\" &&\n                <div>\n                    <h1 style={{background: \"transparent\"}}>Bienvenue {email}</h1>\n\n                    <Container direction=\"row\" alignItems=\"center\" alignContent=\"center\" justify=\"center\" >\n                        <Card>\n                            <CardHeader title=\"Historique de vos commandes\" />\n                            <CardContent>\n                                {client_orders.map(order => \n                                    <Card>\n                                        <CardContent>\n                                            <div>\n                                                <p>Date : {order.createdAt}</p>\n                                                <p>Pizzas :</p>\n                                                <ul>\n                                                    {order.pizzas.map(pizza =>\n                                                        <li>{pizza.nom}</li>\n                                                    )}  \n                                                </ul>\n                                            </div>\n                                        </CardContent>\n                                    </Card>\n                                )}\n                            </CardContent>\n                        </Card>\n                        <CardActions>\n                            <Button style={{marginLeft: \"42%\"}} variant=\"danger\" onClick={handleShowModal}>Supprimer mon compte</Button>\n                        </CardActions>\n                    </Container>\n                </div>\n            }\n            {user_token === \"\" &&\n                <h1 style={{background: \"transparent\"}}>Veuillez vous connecter pour accéder à votre compte</h1>\n            }\n\n            {modal &&\n                <div>\n                    <Modal\n                    show={handleShowModal}\n                    onHide={handleCloseModal}\n                    backdrop=\"static\"\n                    >\n                        <Modal.Header closeButton />\n                        <Modal.Body>\n                            <p>Souhaitez-vous supprimer définitivement votre compte ?</p>\n                        </Modal.Body>\n                        <Modal.Footer>\n                            <Button size=\"small\" variant=\"danger\" onClick={handleDeleteAccount}>Valider</Button>\n                            <Button variant=\"secondary\" onClick={handleCloseModal}>Annuler</Button>\n                        </Modal.Footer>\n                    </Modal>\n                </div>\n            }\n\n            {deletionCompleted && \n                <div>\n                    <Modal\n                    show={handleShowDeletionModal}\n                    onHide={handleCloseDeletionModal}\n                    backdrop=\"static\"\n                    >\n                        <Modal.Header closeButton>\n                        </Modal.Header>\n                        <Modal.Body>\n                            Votre compte a été supprimé\n                        </Modal.Body>\n                        <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={handleCloseDeletionModal}>Fermer</Button>\n                        </Modal.Footer>\n                    </Modal>\n                </div>\n            }\n\n            {redirect &&\n                <Redirect to=\"/\" />\n            }\n\n        </div>\n    )\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}