{"ast":null,"code":"var _jsxFileName = \"/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Profile.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Container from '@material-ui/core/Container';\n\nfunction Profile({\n  user_token\n}) {\n  const [client_orders, setClientOrders] = useState([]);\n  const [email, setEmail] = useState(\"\");\n  useEffect(() => {\n    if (user_token !== \"\") {\n      const user = jwt_decode(user_token);\n      setEmail(user.username);\n      handleGetOrders(user.username);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, []);\n\n  const handleGetOrders = email => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/readClient',\n      data: {\n        email: email\n      }\n    }).then(response => {\n      console.log(response.data);\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/api/v1/readClientOrders',\n        data: {\n          client: response.data[0]._id\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          console.log(res.data);\n          setClientOrders(res.data);\n          console.log(client_orders);\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }, \"Bienvenue \", email), /*#__PURE__*/React.createElement(Container, {\n    direction: \"row\",\n    alignItems: \"center\",\n    alignContent: \"center\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, client_orders.map(order => /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 41\n    }\n  }, \"Date : \", order.createdAt), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 41\n    }\n  }, \"Pizzas :\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 41\n    }\n  }, order.pizzas.map(pizza => /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 49\n    }\n  }, pizza.nom)))))))))));\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Profile.js"],"names":["React","useEffect","useState","axios","jwt_decode","Card","CardContent","CardActions","Container","Profile","user_token","client_orders","setClientOrders","email","setEmail","user","username","handleGetOrders","method","url","data","then","response","console","log","client","_id","res","status","map","order","createdAt","pizzas","pizza","nom"],"mappings":"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","sourcesContent":["import React, { useEffect , useState} from 'react';\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Container from '@material-ui/core/Container';\n\n\nfunction Profile({user_token}){\n    const [client_orders, setClientOrders] = useState([]);\n    const [email, setEmail] = useState(\"\")\n\n    useEffect(() => {\n        if (user_token !== \"\") {\n            const user = jwt_decode(user_token);\n            setEmail(user.username);\n            handleGetOrders(user.username);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n      }, []);\n\n    const handleGetOrders = (email) => {\n        axios({\n            method: 'post',\n            url: 'http://localhost:3000/api/v1/readClient',\n            data : {\n                email: email,\n            }\n        }).then(response => {\n            console.log(response.data);\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/readClientOrders',\n                data : {\n                    client: response.data[0]._id\n                }\n            }).then(res => {\n                if (res.status === 200){\n                    console.log(res.data);\n                    setClientOrders(res.data);\n                    console.log(client_orders);\n                }\n            });\n        });\n    }\n\n    return (\n        <div>\n            <h1>Bienvenue {email}</h1>\n\n            <Container direction=\"row\" alignItems=\"center\" alignContent=\"center\" justify=\"center\" >\n\n                <Card>\n                    <CardContent>\n                        {client_orders.map(order => \n                            <Card>\n                                <CardContent>\n                                    <div>\n                                        <p>Date : {order.createdAt}</p>\n                                        <p>Pizzas :</p>\n                                        <ul>\n                                            {order.pizzas.map(pizza =>\n                                                <li>{pizza.nom}</li>\n                                            )}  \n                                        </ul>\n                                    </div>\n                                </CardContent>\n                            </Card>\n                        )}\n                    </CardContent>\n                </Card>\n            </Container>\n        </div>\n    )\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}