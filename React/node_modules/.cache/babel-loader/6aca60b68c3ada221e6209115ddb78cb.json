{"ast":null,"code":"var _jsxFileName = \"/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Login.js\";\nimport React, { useEffect, useState } from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport axios from \"axios\";\n\nfunction Login({\n  user_token,\n  setUserToken\n}) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [show_modal_fail, setShowModalFail] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n\n  const handleSubmitSignup = () => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/signup',\n      data: {\n        username: username,\n        password: password\n      }\n    }).then(response => {\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/api/v1/signin',\n        data: {\n          username: username,\n          password: password\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          setUserToken(res.token);\n          setRedirect(true);\n        } else {\n          setShowModalFail(true);\n        }\n      });\n    });\n  };\n\n  const handleSubmitSignin = () => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/signin',\n      data: {\n        username: username,\n        password: password\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setUserToken(res.token);\n        setRedirect(true);\n      } else {\n        setShowModalFail(true);\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, \"Connexion/Inscription\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasiName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 33\n    }\n  }, \"Nom d'utilisateur\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Nom d'utilisateur\",\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasicSurname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, \"Mot de passe\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Mot de passe\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"success\",\n    onClick: handleSubmitSignin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, \"Se connecter\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"success\",\n    onClick: handleSubmitSignup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, \"S'inscrire\"))), redirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Login.js"],"names":["React","useEffect","useState","Modal","Button","Form","axios","Login","user_token","setUserToken","username","setUsername","password","setPassword","show_modal_fail","setShowModalFail","redirect","setRedirect","handleSubmitSignup","method","url","data","then","response","res","status","token","handleSubmitSignin","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect , useState} from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport axios from \"axios\";\n\n\nfunction Login({user_token, setUserToken}){\n\n        const [username, setUsername] = useState(\"\");\n        const [password, setPassword] = useState(\"\");\n        const [show_modal_fail, setShowModalFail] = useState(false);\n        const [redirect, setRedirect] = useState(false);\n\n\n        const handleSubmitSignup = () => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/signup',\n                data : {\n                    username: username,\n                    password: password,\n                }\n            }).then(response => {\n                axios({\n                    method: 'post',\n                    url: 'http://localhost:3000/api/v1/signin',\n                    data : {\n                        username: username,\n                        password: password,\n                    }\n                }).then(res => {\n                    if (res.status === 200){\n                        setUserToken(res.token);\n                        setRedirect(true);\n                    }\n                    else{\n                        setShowModalFail(true);\n                    }\n                });\n            });\n        }\n\n        const handleSubmitSignin = () => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/signin',\n                data : {\n                    username: username,\n                    password: password,\n                }\n            }).then(res => {\n                if (res.status === 200){\n                    setUserToken(res.token);\n                    setRedirect(true);\n                }\n                else{\n                    setShowModalFail(true);\n                }\n            });\n        }\n\n        return (\n            <div>\n                <Modal\n                backdrop=\"static\"\n                >\n                    <Modal.Header>\n                    <Modal.Title>Connexion/Inscription</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form>\n                            <Form.Group controlId=\"formBasiName\">\n                                <Form.Label>Nom d'utilisateur</Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Nom d'utilisateur\" onChange={e => setUsername(e.target.value)}/>\n                            </Form.Group>\n\n                            <Form.Group controlId=\"formBasicSurname\">\n                                <Form.Label>Mot de passe</Form.Label>\n                                <Form.Control type=\"password\" placeholder=\"Mot de passe\" onChange={e => setPassword(e.target.value)}/>\n                            </Form.Group>\n                        </Form>\n                    </Modal.Body>\n                    <Modal.Footer>\n                    <Button size=\"small\" variant=\"success\" onClick={handleSubmitSignin}>Se connecter</Button>\n                    <Button size=\"small\" variant=\"success\" onClick={handleSubmitSignup}>S'inscrire</Button>\n                    </Modal.Footer>\n                </Modal>\n\n                {redirect &&\n                    <Redirect to=\"/\" />\n                }\n            </div>\n        )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}