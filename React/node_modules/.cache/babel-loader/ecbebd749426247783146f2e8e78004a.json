{"ast":null,"code":"var _jsxFileName = \"/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Login.js\";\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport axios from \"axios\";\n\nfunction Login({\n  setUserToken\n}) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [show_modal_fail, setShowModalFail] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n\n  const handleSubmitSignup = () => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/signup',\n      data: {\n        username: username,\n        password: password\n      }\n    }).then(response => {\n      axios({\n        method: 'post',\n        url: 'http://localhost:3000/api/v1/signin',\n        data: {\n          username: username,\n          password: password\n        }\n      }).then(res => {\n        if (res.status === 200) {\n          setUserToken(res.token);\n          setRedirect(true);\n        } else {\n          setShowModalFail(true);\n        }\n      });\n    });\n  };\n\n  const handleSubmitSignin = () => {\n    axios({\n      method: 'post',\n      url: 'http://localhost:3000/api/v1/signin',\n      data: {\n        username: username,\n        password: password\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setUserToken(res.data.token);\n        setRedirect(true);\n      } else {\n        setShowModalFail(true);\n      }\n    });\n  };\n\n  const handleCloseModalFail = () => {\n    setShowModalFail(false);\n    setRedirect(true);\n  };\n\n  const handleShowModalFail = () => setShowModalFail(true);\n\n  const handleCloseModal = () => setRedirect(true);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: true,\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"Connexion/Inscription\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasiName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }, \"Nom d'utilisateur\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Nom d'utilisateur\",\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formBasicSurname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 33\n    }\n  }, \"Mot de passe\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"password\",\n    placeholder: \"Mot de passe\",\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 33\n    }\n  })))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"success\",\n    onClick: handleSubmitSignin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"Se connecter\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    variant: \"success\",\n    onClick: handleSubmitSignup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, \"S'inscrire\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, \"Fermer\"))), show_modal_fail && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: handleShowModalFail,\n    onHide: handleCloseModalFail,\n    backdrop: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, \"L'authentification/inscription a \\xE9chou\\xE9, veuillez r\\xE9essayer.\"), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleCloseModalFail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, \"Fermer\")))), redirect && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/remi/Desktop/Polytech/4A/INFO734/TP/Pizzeria/React/src/pages/Login.js"],"names":["React","useState","Redirect","Modal","Button","Form","axios","Login","setUserToken","username","setUsername","password","setPassword","show_modal_fail","setShowModalFail","redirect","setRedirect","handleSubmitSignup","method","url","data","then","response","res","status","token","handleSubmitSignin","handleCloseModalFail","handleShowModalFail","handleCloseModal","e","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport axios from \"axios\";\n\nfunction Login({setUserToken}){\n\n        const [username, setUsername] = useState(\"\");\n        const [password, setPassword] = useState(\"\");\n        const [show_modal_fail, setShowModalFail] = useState(false);\n        const [redirect, setRedirect] = useState(false);\n\n\n        const handleSubmitSignup = () => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/signup',\n                data : {\n                    username: username,\n                    password: password,\n                }\n            }).then(response => {\n                axios({\n                    method: 'post',\n                    url: 'http://localhost:3000/api/v1/signin',\n                    data : {\n                        username: username,\n                        password: password,\n                    }\n                }).then(res => {\n                    if (res.status === 200){\n                        setUserToken(res.token);\n                        setRedirect(true);\n                    }\n                    else{\n                        setShowModalFail(true);\n                    }\n                });\n            });\n        };\n\n        const handleSubmitSignin = () => {\n            axios({\n                method: 'post',\n                url: 'http://localhost:3000/api/v1/signin',\n                data : {\n                    username: username,\n                    password: password,\n                }\n            }).then(res => {\n                if (res.status === 200){\n                    setUserToken(res.data.token);\n                    setRedirect(true);\n                }\n                else{\n                    setShowModalFail(true);\n                }\n            });\n        }\n\n        const handleCloseModalFail = () => {setShowModalFail(false); setRedirect(true);};\n        const handleShowModalFail = () => setShowModalFail(true);\n        const handleCloseModal = () => setRedirect(true);\n\n        return (\n            <div>\n                <Modal\n                show={true}\n                backdrop=\"static\"\n                >\n                    <Modal.Header>\n                    <Modal.Title>Connexion/Inscription</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form>\n                            <Form.Group controlId=\"formBasiName\">\n                                <Form.Label>Nom d'utilisateur</Form.Label>\n                                <Form.Control type=\"text\" placeholder=\"Nom d'utilisateur\" onChange={e => setUsername(e.target.value)}/>\n                            </Form.Group>\n\n                            <Form.Group controlId=\"formBasicSurname\">\n                                <Form.Label>Mot de passe</Form.Label>\n                                <Form.Control type=\"password\" placeholder=\"Mot de passe\" onChange={e => setPassword(e.target.value)}/>\n                            </Form.Group>\n                        </Form>\n                    </Modal.Body>\n                    <Modal.Footer>\n                    <Button size=\"small\" variant=\"success\" onClick={handleSubmitSignin}>Se connecter</Button>\n                    <Button size=\"small\" variant=\"success\" onClick={handleSubmitSignup}>S'inscrire</Button>\n                    <Button variant=\"secondary\" onClick={handleCloseModal}>Fermer</Button>\n                    </Modal.Footer>\n                </Modal>\n\n                {show_modal_fail && \n                    <div>\n                        <Modal\n                        show={handleShowModalFail}\n                        onHide={handleCloseModalFail}\n                        backdrop=\"static\"\n                        >\n                            <Modal.Header closeButton>\n                            </Modal.Header>\n                            <Modal.Body>\n                                L'authentification/inscription a échoué, veuillez réessayer.\n                            </Modal.Body>\n                            <Modal.Footer>\n                            <Button variant=\"secondary\" onClick={handleCloseModalFail}>Fermer</Button>\n                            </Modal.Footer>\n                        </Modal>\n                    </div>\n                }\n\n                {redirect &&\n                    <Redirect to=\"/\" />\n                }\n            </div>\n        )\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}